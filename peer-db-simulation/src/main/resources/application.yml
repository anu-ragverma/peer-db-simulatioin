# src/main/resources/application.yml
quarkus:
  datasource:
    source:
      db-kind: postgresql
      username: ${SOURCE_DB_USER:postgres}
      password: ${SOURCE_DB_PASSWORD:redhat}
      jdbc:
        url: jdbc:postgresql://${SOURCE_DB_HOST:localhost}:${SOURCE_DB_PORT:9001}/${SOURCE_DB_NAME:source_db}
        max-size: 32
        min-size: 4
        acquisition-timeout: 5M
    sink:
      db-kind: postgresql
      username: ${SINK_DB_USER:postgres}
      password: ${SINK_DB_PASSWORD:redhat}
      jdbc:
        url: jdbc:postgresql://${SINK_DB_HOST:localhost}:${SINK_DB_PORT:9001}/${SINK_DB_NAME:sink_db}
        max-size: 48
        min-size: 8
        acquisition-timeout: 5M
  
  log:
    level: INFO
    console:
      json: false
  
  thread-pool:
    max-threads: 200
  
  replicator:
    tables:
      users:
        source-query: "SELECT id, name, email, created_at, updated_at FROM users WHERE updated_at > ? ORDER BY updated_at, id"
        batch-size: 10000
        unique-key: "id"
        order-by: "updated_at, id"
        virtual-threads: 8
      orders:
        source-query: "SELECT order_id, user_id, amount, status, created_at FROM orders WHERE created_at > ? ORDER BY created_at, order_id"
        batch-size: 15000
        unique-key: "order_id"
        order-by: "created_at, order_id"
        virtual-threads: 12
      products:
        source-query: "SELECT product_id, name, price, category, last_modified FROM products WHERE last_modified > ? ORDER BY last_modified, product_id"
        batch-size: 20000
        unique-key: "product_id"
        order-by: "last_modified, product_id"
        virtual-threads: 8
    
    checkpoint-interval: 100000
    sync-batch-size: 50000
    max-overall-threads: 50